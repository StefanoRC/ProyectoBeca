---
import Layout from "../../layouts/layout.astro";
---

<Layout title="Crear cuenta">
  <form id="register">
    <h1>Crear cuenta</h1>
    <label for="name" :>Nombre</label>
    <input type="text" name="name" required />
    <label for="email">Email</label>
    <input type="email" name="email" required />
    <label for="user" :>Usuario</label>
    <input type="text" name="user" required />
    <label for="password">Contrase√±a</label>
    <input type="password" name="password" required />
    <button type="submit">Enviar</button>
  </form>

  <script>
    try {
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("register");
        form.addEventListener("submit", function (e) {
          e.preventDefault();
          const name = (
            document.querySelector('input[name="name"]') as HTMLInputElement
          ).value;
          const email = (
            document.querySelector('input[name="email"]') as HTMLInputElement
          ).value;
          const user = (
            document.querySelector('input[name="user"]') as HTMLInputElement
          ).value;
          const password = (
            document.querySelector('input[name="password"]') as HTMLInputElement
          ).value;
          const data = {
            name: name,
            email: email,
            user: user,
            password: password,
          };
          let users = JSON.parse(localStorage.getItem("registerData"));
          if (!Array.isArray(users)) {
            users = [];
          }
          users.push(data);
          localStorage.setItem("registerData", JSON.stringify(users));
          alert("Datos guardados en localStorage");
        });
      });
    } catch (error) {
      console.log("Error: ", error);
    }
  </script>
</Layout>
